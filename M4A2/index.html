<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IT Support Ticket System</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .hidden {
            display: none;
        }
        .error {
            color: red;
        }
        .confirmation {
            color: green;
        }
        .dimmed {
            opacity: 0.5;
        }
        #btnSubmit:hover {
            color: red;
            font-weight: bold;
        }
    </style>
    <script>
        $(document).ready(function() {
            $("#loginForm").submit(function(event) {
                event.preventDefault();
                var userName = $("#userId").val(); 
                if (userName === "validUser") { 
                    $("#greeting").text("Hello, " + userName).show();
                    $("#loginForm").hide();
                    $("#ticketForm").show(); // Show the ticket form after login
                } else {
                    $("#errorMessage").text("Login failed. Please try again.").show();
                    $("#userId, #password").val('');
                }
            });

            $("#ticketType").change(function() {
                var selectedType = $(this).val();
                $(".ticketFields").hide();
                $("#" + selectedType + "Fields").show();
            });

            $("#ticketForm").submit(function(event) {
                event.preventDefault();

                if (formValidate()) {
                    // Send form data to the server (simulation)
                    console.log("Form data sent to server");

                    // Create a timestamp
                    var timestamp = new Date().toLocaleString();
                    
                    // Display the timestamp on the page
                    $("#timestampMessage").text("Submission timestamp: " + timestamp).show();

                    // Determine and dim the element that triggered the event
                    var triggerElement = $(event.target);
                    triggerElement.addClass('dimmed');

                    $("#confirmationMessage").text("Your support ticket has been submitted successfully!").show();
                } else {
                    $("#errorMessage").text("Form validation failed. Please correct the errors and try again.").show();
                    $("#ticketForm")[0].reset();
                    $(".ticketFields").hide();
                }
            });


            $("#btnSubmit").hover(function() {
                $(this).css({
                    'color': 'red',
                    'font-weight': 'bold'
                });
            }, function() {
                $(this).css({
                    'color': '',
                    'font-weight': ''
                });
            });
        });

        function formValidate() {
            // Placeholder validation function
            // This should return true if validation passes, false otherwise
            return true; // Change as per actual validation logic
        }
    </script>
</head>
<body>
    <form id="loginForm">
        <input type="text" id="userId" placeholder="User ID">
        <input type="password" id="password" placeholder="Password">
        <button type="submit">Login</button>
    </form>
    <div id="greeting" class="hidden"></div>
    <div id="errorMessage" class="error hidden"></div>

    <form id="ticketForm" class="hidden">
        <label for="reqDate">Request Date:</label>
        <input type="date" id="reqDate" name="reqDate">
        
        <label for="empId">Employee ID:</label>
        <input type="text" id="empId" name="empId">
        
        <label for="fName">First Name:</label>
        <input type="text" id="fName" name="fName">
        
        <label for="lName">Last Name:</label>
        <input type="text" id="lName" name="lName">
        
        <label for="probDesc">Problem Description:</label>
        <textarea id="probDesc" name="probDesc"></textarea>
        
        <select id="ticketType">
            <option value="">Select Ticket Type</option>
            <option value="computer">Computer</option>
            <option value="software">Software</option>
            <option value="network">Network</option>
        </select>
        
        <div id="computerFields" class="ticketFields hidden">
            <input type="text" placeholder="Computer Model">
        </div>
        
        <div id="softwareFields" class="ticketFields hidden">
            <input type="text" placeholder="Software Name">
        </div>
        
        <div id="networkFields" class="ticketFields hidden">
            <input type="text" placeholder="Network Issue">
        </div>
        
        <button type="submit" id="btnSubmit">Submit</button>
    </form>
    <div id="confirmationMessage" class="confirmation hidden"></div>
    <div id="timestampMessage" class="confirmation hidden"></div> <!-- Added for timestamp display -->
</body>
</html>